<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>MySQL面试题总结 - NarcissusBlog</title><meta name="Description" content="mysql相关面试题总结"><meta property="og:title" content="MySQL面试题总结" />
<meta property="og:description" content="mysql相关面试题总结" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://wen-nan.github.io/posts/mysql%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-16T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-02-16T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="MySQL面试题总结"/>
<meta name="twitter:description" content="mysql相关面试题总结"/>
<meta name="application-name" content="NarcissusBlog">
<meta name="apple-mobile-web-app-title" content="NarcissusBlog"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://wen-nan.github.io/posts/mysql%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93/" /><link rel="prev" href="http://wen-nan.github.io/posts/golang%E6%BA%90%E7%A0%81_%E5%8D%8F%E7%A8%8B%E8%B0%83%E5%BA%A6/" /><link rel="next" href="http://wen-nan.github.io/posts/%E9%9B%B6%E6%8B%B7%E8%B4%9D/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "MySQL面试题总结",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/wen-nan.github.io\/posts\/mysql%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93\/"
        },"genre": "posts","keywords": "MySQL, 面试总结","wordcount":  7853 ,
        "url": "http:\/\/wen-nan.github.io\/posts\/mysql%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93\/","datePublished": "2022-02-16T00:00:00+00:00","dateModified": "2022-02-16T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "Narcissus"},"author": {
                "@type": "Person",
                "name": "Narcissus"
            },"description": "mysql相关面试题总结"
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="NarcissusBlog"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/mechanic.png"
        data-srcset="/mechanic.png, /mechanic.png 1.5x, /mechanic.png 2x"
        data-sizes="auto"
        alt="/mechanic.png"
        title="/mechanic.png" />NarcissusBlog</a>
        </div>
        <div class="menu">
            <div class="menu-inner">
                <a class="menu-item" href="/posts/" title="全部文章"><i class="fa fa-fw fa-bars"></i> 全部文章 
                        </a><a class="menu-item" href="/categories/" title="分类"><i class="fas fa-fw fa-th"></i> 分类 
                        </a><a class="menu-item" href="/tags/" title="标签"><i class="fas fa-fw fa-tag"></i> 标签 
                        </a>
                        <div class="dropdown">
                            <a href="javascript:void(0);" class="menu-item menu-more dropbtn" title="文档" ><i class='fas fa-fw fa-fan fa-spin'></i> 文档 
                            </a>
                            <div class="menu-more-content dropdown-content"><a href="https://gohugo.io/documentation/" title="" target="_blank" rel="noopener"><i class='fa fa-thumbs-up'></i> Hugo文档 </a></div>
                        </div>
                    <a class="menu-item" href="/about/" title="关于"><i class="fas fa-fw fa-at"></i> 关于 
                        </a><a class="menu-item" href="https://github.com/wen-nan" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  
                        </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="NarcissusBlog"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/mechanic.png"
        data-srcset="/mechanic.png, /mechanic.png 1.5x, /mechanic.png 2x"
        data-sizes="auto"
        alt="/mechanic.png"
        title="/mechanic.png" />NarcissusBlog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="全部文章"><i class="fa fa-fw fa-bars"></i> 全部文章 
                    </a><a class="menu-item" href="/categories/" title="分类"><i class="fas fa-fw fa-th"></i> 分类 
                    </a><a class="menu-item" href="/tags/" title="标签"><i class="fas fa-fw fa-tag"></i> 标签 
                    </a>
                    <div class="dropdown">
                        <a href="javascript:void(0);" class="menu-item menu-more dropbtn" title="文档" ><i class='fas fa-fw fa-fan fa-spin'></i> 文档 
                        </a>
                        <div class="menu-more-content dropdown-content"><a href="https://gohugo.io/documentation/" title="" target="_blank" rel="noopener"><i class='fa fa-thumbs-up'></i> Hugo文档 </a></div>
                    </div>
                <a class="menu-item" href="/about/" title="关于"><i class="fas fa-fw fa-at"></i> 关于 
                    </a><a class="menu-item" href="https://github.com/wen-nan" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  
                    </a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">MySQL面试题总结</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Narcissus</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/mysql/"><i class="far fa-folder fa-fw"></i>MySQL</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-02-16">2022-02-16</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 7853 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 16 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#基础篇">基础篇</a>
      <ul>
        <li><a href="#执行一条sql语句期间发生了什么">执行一条SQL语句，期间发生了什么？</a>
          <ul>
            <li><a href="#第一步连接器">第一步：连接器</a></li>
            <li><a href="#第二步查询缓存">第二步：查询缓存</a></li>
            <li><a href="#第三步解析器">第三步：解析器</a></li>
            <li><a href="#第四步执行sql">第四步：执行SQL</a></li>
          </ul>
        </li>
        <li><a href="#mysql一行记录是怎么存储的">MySQL一行记录是怎么存储的？</a>
          <ul>
            <li><a href="#mysql数据存放在哪个文件">MySQL数据存放在哪个文件？</a></li>
            <li><a href="#表空间文件结构">表空间文件结构</a></li>
            <li><a href="#innodb的compact行格式">InnoDB的COMPACT行格式</a>
              <ul>
                <li><a href="#记录的额外信息">记录的额外信息</a></li>
                <li><a href="#记录的真实数据">记录的真实数据</a></li>
              </ul>
            </li>
            <li><a href="#varcharn中n最大取值">varchar(n)中n最大取值？</a></li>
            <li><a href="#行溢出后mysql是如何处理的">行溢出后，MySQL是如何处理的？</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#索引篇">索引篇</a>
      <ul>
        <li><a href="#什么是索引">什么是索引？</a></li>
        <li><a href="#索引的分类">索引的分类</a>
          <ul>
            <li><a href="#按物理存储分类">按物理存储分类</a></li>
            <li><a href="#按字段特性分类">按字段特性分类</a></li>
            <li><a href="#b树索引">B+树索引</a></li>
            <li><a href="#联合索引">联合索引</a>
              <ul>
                <li><a href="#联合索引范围查询">联合索引范围查询</a></li>
                <li><a href="#索引下推">索引下推</a></li>
                <li><a href="#索引区分度">索引区分度</a></li>
                <li><a href="#联合索引进行排序">联合索引进行排序</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#什么时候需要不需要创建索引">什么时候需要/不需要创建索引？</a></li>
        <li><a href="#有什么索引优化方法">有什么索引优化方法？</a>
          <ul>
            <li><a href="#前缀索引优化">前缀索引优化</a></li>
            <li><a href="#覆盖索引优化">覆盖索引优化</a></li>
            <li><a href="#主键索引最好是自增的">主键索引最好是自增的</a></li>
            <li><a href="#索引最好设置为not-null">索引最好设置为NOT NULL</a></li>
            <li><a href="#防止索引失效">防止索引失效</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="基础篇">基础篇</h2>
<h3 id="执行一条sql语句期间发生了什么">执行一条SQL语句，期间发生了什么？</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://narcissusblog-img.oss-cn-beijing.aliyuncs.com/uPic/file-2023-02/image-20230217134152664.png"
        data-srcset="https://narcissusblog-img.oss-cn-beijing.aliyuncs.com/uPic/file-2023-02/image-20230217134152664.png, https://narcissusblog-img.oss-cn-beijing.aliyuncs.com/uPic/file-2023-02/image-20230217134152664.png 1.5x, https://narcissusblog-img.oss-cn-beijing.aliyuncs.com/uPic/file-2023-02/image-20230217134152664.png 2x"
        data-sizes="auto"
        alt="https://narcissusblog-img.oss-cn-beijing.aliyuncs.com/uPic/file-2023-02/image-20230217134152664.png"
        title="image-20230217134152664" /></p>
<p>MySQL 的架构共分为两层：<strong>Server 层和存储引擎层</strong>，</p>
<ul>
<li><strong>Server 层负责建立连接、分析和执行 SQL</strong>。MySQL 大多数的核心功能模块都在这实现，主要包括连接器，查询缓存、解析器、预处理器、优化器、执行器等。另外，所有的内置函数（如日期、时间、数学和加密函数等）和所有跨存储引擎的功能（如存储过程、触发器、视图等。）都在 Server 层实现。</li>
<li><strong>存储引擎层负责数据的存储和提取</strong>。支持 InnoDB、MyISAM、Memory 等多个存储引擎，不同的存储引擎共用一个 Server 层。现在最常用的存储引擎是 InnoDB，从 MySQL 5.5 版本开始， InnoDB 成为了 MySQL 的默认存储引擎。我们常说的索引数据结构，就是由存储引擎层实现的，不同的存储引擎支持的索引类型也不相同，比如 InnoDB 支持索引类型是 B+树 ，且是默认使用，也就是说在数据表中创建的主键索引和二级索引默认使用的是 B+ 树索引。</li>
</ul>
<h4 id="第一步连接器">第一步：连接器</h4>
<p>使用MySQL服务之前，需要连接MySQL 服务，连接过程需要先经过 TCP 三次握手，因为 MySQL 是基于 TCP 协议进行传输的。如果用户密码都没有问题，连接器就会获取该用户的权限，然后保存起来，后续该用户在此连接里的任何操作，都会基于连接开始时读到的权限进行权限逻辑的判断。所以，如果一个用户已经建立了连接，即使管理员中途修改了该用户的权限，也不会影响已经存在连接的权限。</p>
<blockquote>
<p><strong>空闲连接会一直占用吗？</strong></p>
<p>MySQL 定义了空闲连接的最大空闲时长，由 <code>wait_timeout</code> 参数控制的，默认值是 8 小时（28880秒），如果空闲连接超过了这个时间，连接器就会自动将它断开。</p>
<p><strong>MySQL的连接数限制？</strong></p>
<p>MySQL 服务支持的最大连接数由 max_connections 参数控制。超过这个值，系统就会拒绝接下来的连接请求，并报错提示“Too many connections”。</p>
<p><strong>怎么解决长连接占用内存的问题？</strong></p>
<p>有如下两种解决方案：</p>
<ul>
<li><strong>定期断开长连接</strong>。</li>
<li><strong>客户端主动重置连接</strong>。</li>
</ul>
</blockquote>
<h4 id="第二步查询缓存">第二步：查询缓存</h4>
<p>MySQL 服务收到 SQL 语句后，就会解析出 SQL 语句的第一个字段，看看是什么类型的语句。如果 SQL 是查询语句（select 语句），MySQL 就会先去查询缓存（ Query Cache ）里查找缓存数据，看看之前有没有执行过这一条命令，这个查询缓存是以 key-value 形式保存在内存中的，key 为 SQL 查询语句，value 为 SQL 语句查询的结果。如果命中缓存则直接返回结果；如果没有命中缓存就要往下继续执行，等执行完后，查询的结果就会被存入查询缓存中。</p>
<blockquote>
<p>注意：对于更新比较频繁的表，查询缓存的命中率很低，因为只要一个表有更新操作，那么这个表的查询缓存就会被清空。</p>
</blockquote>
<h4 id="第三步解析器">第三步：解析器</h4>
<p>在正式执行 SQL 查询语句之前， MySQL 会先对 SQL 语句做解析，这个工作交由「<strong>解析器</strong>」来完成。</p>
<p>解析器会做如下两件事：</p>
<ul>
<li><strong>词法分析</strong>。MySQL 会根据你输入的字符串识别出关键字出来，构建出 SQL 语法树。</li>
<li><strong>语法分析</strong>。根据词法分析的结果，语法解析器会根据语法规则，判断你输入的这个 SQL 语句是否满足 MySQL 语法。</li>
</ul>
<h4 id="第四步执行sql">第四步：执行SQL</h4>
<p>接着就要进入执行 SQL 查询语句的流程了，每条<code>SELECT</code> 查询语句流程主要可以分为下面这三个阶段：</p>
<ul>
<li>prepare 阶段，也就是预处理阶段；</li>
<li>optimize 阶段，也就是优化阶段；</li>
<li>execute 阶段，也就是执行阶段；</li>
</ul>
<blockquote>
<p><strong>预处理器</strong></p>
<p>预处理阶段主要工作为：</p>
<blockquote>
<ol>
<li>检查 SQL 查询语句中的表或者字段是否存在</li>
<li>将 <code>select *</code> 中的 <code>*</code> 符号，扩展为表上的所有列</li>
</ol>
</blockquote>
<hr>
<p><strong>优化器</strong></p>
<p><strong>优化器主要负责将 SQL 查询语句的执行方案确定下来</strong>，比如在表里面有多个索引的时候，优化器会基于查询成本的考虑，来决定选择使用哪个索引。</p>
<hr>
<p><strong>执行器</strong></p>
<p>根据执行计划执行 SQL 查询语句，从存储引擎读取记录，返回给客户端。</p>
</blockquote>
<hr>
<h3 id="mysql一行记录是怎么存储的">MySQL一行记录是怎么存储的？</h3>
<p>MySQL的存储行为由存储引擎实现，下面介绍InnoDB的情况。</p>
<h4 id="mysql数据存放在哪个文件">MySQL数据存放在哪个文件？</h4>
<p>我们每创建一个 database（数据库） 都会在<code>/var/lib/mysql/</code>目录里面创建一个以 database 为名的目录，然后保存表结构和表数据的文件都会存放在这个目录里。该目录下主要有三类文件：</p>
<ul>
<li><code>db.opt</code>：用来存储当前数据库的默认字符集和字符校验规则。</li>
<li><code>表.frm</code>：<strong>表结构</strong>会保存在这个文件。</li>
<li><code>表.idb</code>：<strong>表数据</strong>会保存在这个文件。MySQL5.6.6开始，每一张表数据都会有一个单独的.idb文件。称之为<strong>独占表空间文件</strong>。</li>
</ul>
<hr>
<h4 id="表空间文件结构">表空间文件结构</h4>
<p><strong>表空间由段（segment）、区（extent）、页（page）、行（row）组成</strong>。</p>
<blockquote>
<ul>
<li>行：数据库表中的记录都是按行（row）进行存放的，每行记录根据不同的行格式，有不同的存储结构。</li>
<li>页：<strong>InnoDB 的数据是按「页」为单位来读写的，默认每个页大小为16kb</strong>，页是 InnoDB 存储引擎磁盘管理的最小单元，意味着数据库每次读写都是以 16KB 为单位的，一次最少从磁盘中读取 16K 的内容到内存中，一次最少把内存中的 16K 内容刷新到磁盘中。</li>
<li>区：因为InnoDB通过B+树来管理数据，而B+树的每一层都通过双向链表相连，为了让链表相邻的页物理空间也相邻。<strong>在表中数据量大的时候，为某个索引分配空间的时候就不再按照页为单位分配了，而是按照区（extent）为单位分配。</strong></li>
<li>段：段一般分为数据段、索引段和回滚段等。数据段存放B + 树的叶子节点的区的集合；索引段存放 B + 树的非叶子节点的区的集合；回滚段存放的是回滚数据的区的集合，用于事务多版本管理。</li>
</ul>
</blockquote>
<hr>
<h4 id="innodb的compact行格式">InnoDB的COMPACT行格式</h4>
<p>InnoDB 提供了 4 种行格式，分别是 Redundant、Compact、Dynamic和 Compressed 行格式。Redundant行格式非紧凑型，已经弃用。Dynamic和Compressed行格式和Compact非常类似，下面讲解Compact行格式。</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://narcissusblog-img.oss-cn-beijing.aliyuncs.com/uPic/file-2023-02/image-20230217153726521.png"
        data-srcset="https://narcissusblog-img.oss-cn-beijing.aliyuncs.com/uPic/file-2023-02/image-20230217153726521.png, https://narcissusblog-img.oss-cn-beijing.aliyuncs.com/uPic/file-2023-02/image-20230217153726521.png 1.5x, https://narcissusblog-img.oss-cn-beijing.aliyuncs.com/uPic/file-2023-02/image-20230217153726521.png 2x"
        data-sizes="auto"
        alt="https://narcissusblog-img.oss-cn-beijing.aliyuncs.com/uPic/file-2023-02/image-20230217153726521.png"
        title="image-20230217153726521" /></p>
<h5 id="记录的额外信息">记录的额外信息</h5>
<p>记录的额外信息主要包含三部分：变长字段长度列表、NULL值列表、记录头信息。</p>
<ul>
<li><strong>变长字段长度列表</strong></li>
</ul>
<p>对于varchar这样的变长数据类型，存储数据时也需要存储数据占用的长度。变长字段的真实数据占用的字节数会按照列的顺序<strong>逆序存放</strong>。当数据表中没有变长字段时，变长字段长度列表将会被省略。</p>
<blockquote>
<p>为什么会按逆序存放？</p>
<p>主要是因为「记录头信息」中指向下一个记录的指针，指向的是下一条记录的「记录头信息」和「真实数据」之间的位置。而「变长字段长度列表」中的信息之所以要逆序存放，是因为这样可以<strong>使得位置靠前的记录的真实数据和数据对应的字段长度信息可以同时在一个 CPU Cache Line 中，这样就可以提高 CPU Cache 的命中率</strong>。</p>
</blockquote>
<ul>
<li><strong>NULL值列表</strong></li>
</ul>
<p>如果存在允许 NULL 值的列，则每个列对应一个二进制位（bit），二进制位按照列的顺序逆序排列。值为1表示该列值为NULL；值为0表示该列值不为NULL。</p>
<blockquote>
<p><strong>注意：NULL 值列表必须用整数个字节的位表示（1字节8位），如果使用的二进制位个数不足整数个字节，则在字节的高位补 <code>0</code>。</strong></p>
<p>当所有列都设置为NOT NULL的时候，行格式中就不会有NULL值列表了。</p>
</blockquote>
<ul>
<li><strong>记录头信息</strong></li>
</ul>
<blockquote>
<p>包含的信息较多，常见有：</p>
<ol>
<li>delete_mask ：标识此条数据是否被删除。</li>
<li>next_record：下一条记录的位置。</li>
<li>record_type：表示当前记录的类型。</li>
</ol>
</blockquote>
<h5 id="记录的真实数据">记录的真实数据</h5>
<p>记录真实数据部分除了我们定义的字段，还有三个隐藏字段，分别为：row_id、trx_id、roll_pointer。</p>
<blockquote>
<ol>
<li>row_id：如果我们建表的时候指定了主键或者唯一约束列，那么就没有 row_id 隐藏字段了。如果既没有指定主键，又没有唯一约束，那么 InnoDB 就会为记录添加 row_id 隐藏字段。</li>
<li>trx_id：事务id，表示这个数据是由哪个事务生成的。</li>
<li>roll_pointer：这条记录上一个版本的指针。</li>
</ol>
</blockquote>
<hr>
<h4 id="varcharn中n最大取值">varchar(n)中n最大取值？</h4>
<p><strong>MySQL 规定除了 TEXT、BLOBs 这种大对象类型之外，其他所有的列（不包括隐藏列和记录头信息）占用的字节长度加起来不能超过 65535 个字节</strong>。</p>
<p>Varchar(n)中的n是指最多存储的字符数量。对于ascii码字符集，一个字符占一个字节，对于utf-8，一个字符占三个字节。</p>
<blockquote>
<ul>
<li>单字段情况</li>
</ul>
<p><strong>一行数据的最大字节数 65535，其实是包含「变长字段长度列表」和 「NULL 值列表」所占用的字节数的</strong>。所以， 我们在算 varchar(n) 中 n 最大值时，需要减去 storage overhead 占用的字节数。NULL值列表如果允许为空，那么需要消耗一个字节；变长字段长度列表，遵循如下规格：</p>
<blockquote>
<p>条件一：如果变长字段允许存储的最大字节数小于等于 255 字节，就会用 1 字节表示「变长字段长度」；</p>
<p>条件二：如果变长字段允许存储的最大字节数大于 255 字节，就会用 2 字节表示「变长字段长度」；</p>
</blockquote>
<p>因此消耗两个字节。</p>
<p>所以，<strong>在数据库表只有一个 varchar(n) 字段且字符集是 ascii 的情况下，varchar(n) 中 n 最大值 = 65535 - 2 - 1 = 65532</strong>。</p>
<p>在 UTF-8 字符集下，一个字符串最多需要三个字节，varchar(n) 的 n 最大取值就是 65532/3 = 21844。</p>
<hr>
<ul>
<li>多字段情况</li>
</ul>
<p><strong>如果有多个字段的话，要保证所有字段的长度 + 变长字段字节数列表所占用的字节数 + NULL值列表所占用的字节数 &lt;= 65535</strong>。</p>
</blockquote>
<hr>
<h4 id="行溢出后mysql是如何处理的">行溢出后，MySQL是如何处理的？</h4>
<p>MySQL 中磁盘和内存交互的基本单位是页，一个页的大小一般是 <code>16KB</code>，也就是 <code>16384字节</code>，当一页不能存放记录时，就会<strong>发生行溢出，多的数据就会存到另外的「溢出页」中</strong>。</p>
<p>针对Compact行格式，会在真实数据处用 20 字节存储指向溢出页的地址，从而可以找到剩余数据所在的页。</p>
<p>而对于Compressed 和 Dynamic 这两个行格式，记录的真实数据处不会存储该列的一部分数据，只存储 20 个字节的指针来指向溢出页，而实际的数据都存储在溢出页中。</p>
<hr>
<hr>
<h2 id="索引篇">索引篇</h2>
<h3 id="什么是索引">什么是索引？</h3>
<p>索引的定义就是<strong>帮助存储引擎快速获取数据的一种数据结构</strong>，形象的说就是<strong>索引是数据的目录</strong>。</p>
<h3 id="索引的分类">索引的分类</h3>
<p>我们可以按照四个角度来分类索引。</p>
<ul>
<li>按「数据结构」分类：<strong>B+tree索引、Hash索引、Full-text索引</strong>。</li>
<li>按「物理存储」分类：<strong>聚簇索引（主键索引）、二级索引（辅助索引）</strong>。</li>
<li>按「字段特性」分类：<strong>主键索引、唯一索引、普通索引、前缀索引</strong>。</li>
<li>按「字段个数」分类：<strong>单列索引、联合索引</strong>。</li>
</ul>
<h4 id="按物理存储分类">按物理存储分类</h4>
<p>从物理存储的角度来看，索引可以分为聚簇索引(又叫主键索引)和非聚簇索引(又叫二级索引、辅助索引)。</p>
<blockquote>
<ul>
<li>
<p>主键索引的 B+Tree 的叶子节点存放的是实际数据，所有完整的用户记录都存放在主键索引的 B+Tree 的叶子节点里；</p>
</li>
<li>
<p>二级索引的 B+Tree 的叶子节点存放的是主键值，而不是实际数据。</p>
</li>
</ul>
</blockquote>
<p>在查询时使用了二级索引，如果查询的数据能在二级索引里查询的到，那么就不需要回表，这个过程就是<strong>覆盖索引</strong>。</p>
<p>如果查询的数据不在二级索引里，就会先检索二级索引，找到对应的叶子节点，获取到主键值后，然后再检索主键索引，就能查询到数据了，这个过程就是<strong>回表</strong>。</p>
<hr>
<h4 id="按字段特性分类">按字段特性分类</h4>
<p>从字段特性的角度来看，索引分为主键索引、唯一索引、普通索引、前缀索引。</p>
<ul>
<li><strong>主键索引</strong></li>
</ul>
<p>主键索引就是建立在主键字段上的索引，通常在创建表的时候一起创建，一张表最多只有一个主键索引，索引列的值不允许有空值。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 创建表时，创立主键索引方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="nf">table_name</span><span class="w">  </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">....</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">index_column_1</span><span class="p">)</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="n">BTREE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><ul>
<li><strong>唯一索引</strong></li>
</ul>
<p>唯一索引建立在 UNIQUE 字段上的索引，一张表可以有多个唯一索引，索引列的值必须唯一，但是允许有空值。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 建表时
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="nf">table_name</span><span class="w">  </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">....</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">KEY</span><span class="p">(</span><span class="n">index_column_1</span><span class="p">,</span><span class="n">index_column_2</span><span class="p">,...)</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 建表后
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">index_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="nf">table_name</span><span class="p">(</span><span class="n">index_column_1</span><span class="p">,</span><span class="n">index_column_2</span><span class="p">,...);</span><span class="w"> 
</span></span></span></code></pre></div><ul>
<li><strong>普通索引</strong></li>
</ul>
<p>普通索引就是建立在普通字段上的索引，既不要求字段为主键，也不要求字段为 UNIQUE。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 建表时
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="nf">table_name</span><span class="w">  </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">....</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">INDEX</span><span class="p">(</span><span class="n">index_column_1</span><span class="p">,</span><span class="n">index_column_2</span><span class="p">,...)</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 建表后
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">index_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="nf">table_name</span><span class="p">(</span><span class="n">index_column_1</span><span class="p">,</span><span class="n">index_column_2</span><span class="p">,...);</span><span class="w"> 
</span></span></span></code></pre></div><ul>
<li><strong>前缀索引</strong></li>
</ul>
<p>前缀索引是指对字符类型字段的前几个字符建立的索引，而不是在整个字段上建立的索引，前缀索引可以建立在字段类型为 char、 varchar、binary、varbinary 的列上。<strong>使用前缀索引的目的是为了减少索引占用的存储空间，提升查询效率。</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="c1"># 建表时
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="nf">table_name</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">column_list</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">INDEX</span><span class="p">(</span><span class="nf">column_name</span><span class="p">(</span><span class="n">length</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1"># 建表后
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">index_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="nf">table_name</span><span class="p">(</span><span class="nf">column_name</span><span class="p">(</span><span class="n">length</span><span class="p">));</span><span class="w"> 
</span></span></span></code></pre></div><hr>
<h4 id="b树索引">B+树索引</h4>
<p>InnoDB存储引擎默认使用B+树索引作为索引的数据结构。建表时，InnoDB存储引擎会根据不同的场景选择不同的列作为索引：</p>
<ul>
<li>如果有主键，默认会使用主键作为聚簇索引的索引键（key）；</li>
<li>如果没有主键，就选择第一个不包含 NULL 值的唯一列(UNIQUE)作为聚簇索引的索引键（key）；</li>
<li>在上面两个都没有的情况下，InnoDB 将自动生成一个隐式自增 id 列作为聚簇索引的索引键（key）；</li>
</ul>
<blockquote>
<p>B+Tree 是一种多叉树，<strong>叶子节点才存放数据，非叶子节点只存放索引</strong>，而且每个节点里的数据是<strong>按主键顺序存放</strong>的。每一层父节点的索引值都会出现在下层子节点的索引值中，因此在叶子节点中，包括了所有的索引值信息，并且每一个叶子节点都有两个指针，分别指向下一个叶子节点和上一个叶子节点，形成一个双向链表。</p>
<p>B+Tree 存储千万级的数据只需要 3-4 层高度就可以满足，这意味着从千万级的表查询目标数据最多需要 3-4 次磁盘 I/O，所以<strong>B+Tree 相比于 B 树和二叉树来说，最大的优势在于查询效率很高，因为即使在数据量很大的情况，查询一个数据的磁盘 I/O 依然维持在 3-4次。</strong></p>
</blockquote>
<hr>
<h4 id="联合索引">联合索引</h4>
<p>通过将多个字段组合成一个索引，该索引就被称为联合索引。使用联合索引时，存在<strong>最左匹配原则</strong>，也就是按照最左优先的方式进行索引的匹配。</p>
<blockquote>
<p>例如创建一个<code>(a, b, c)</code>的联合索引，下列查询条件就可以匹配上联合索引：</p>
<ul>
<li>where a = 1;</li>
<li>where b = 1 and a = 1;</li>
</ul>
<p><strong>注意：因为有查询优化器，所以字段在where语句中的顺序不重要。</strong></p>
<p>下列几种查询，因为不符合最左匹配原则，所以无法匹配上联合索引：</p>
<ul>
<li>where b = 1;</li>
<li>Where b = 1 and c = 2;</li>
</ul>
<p><strong>b 和 c是全局无序，局部有序的情况。</strong></p>
</blockquote>
<h5 id="联合索引范围查询">联合索引范围查询</h5>
<p>在使用范围查询的时候，联合索引的最左匹配原则会一直向右匹配直到遇到「范围查询」就会停止匹配。<strong>联合索引的最左匹配原则，在遇到范围查询（如 &gt;、&lt;）的时候，就会停止匹配，也就是范围查询的字段可以用到联合索引，但是在范围查询字段的后面的字段无法用到联合索引。注意，对于 &gt;=、&lt;=、BETWEEN、like 前缀匹配的范围查询，并不会停止匹配</strong>。</p>
<blockquote>
<p><code>select * from t_table where a &gt;= 1 and b = 2</code>，联合索引（a, b）哪一个字段用到了联合索引的 B+Tree？</p>
<p>虽然在符合 a&gt;= 1 条件的二级索引记录的范围里，b 字段的值是「无序」的，<strong>但是对于符合 a = 1 的二级索引记录的范围里，b 字段的值是「有序」的。</strong> 于是，在确定需要扫描的二级索引的范围时，当二级索引记录的 a 字段值为 1 时，可以通过 b = 2 条件减少需要扫描的二级索引记录范围（b 字段可以利用联合索引进行索引查询的意思）。也就是说，从符合 a = 1 and b = 2 条件的第一条记录开始扫描，而不需要从第一个 a 字段值为 1 的记录开始扫描。</p>
<p>所以，<strong>这条查询语句 a 和 b 字段都用到了联合索引进行索引查询</strong>。</p>
</blockquote>
<hr>
<h5 id="索引下推">索引下推</h5>
<p>我们知道，对于联合索引（a, b），在执行 <code>select * from table where a &gt; 1 and b = 2</code> 语句的时候，只有 a 字段能用到索引，那在联合索引的 B+Tree 找到第一个满足条件的主键值（ID 为 2）后，还需要判断其他条件是否满足（看 b 是否等于 2），那是在联合索引里判断？还是回主键索引去判断呢？</p>
<ul>
<li>在 MySQL 5.6 之前，只能从 ID2 （主键值）开始一个个回表，到「主键索引」上找出数据行，再对比 b 字段值。</li>
<li>而 MySQL 5.6 引入的<strong>索引下推优化</strong>（index condition pushdown)， <strong>可以在联合索引遍历过程中，对联合索引中包含的字段先做判断，直接过滤掉不满足条件的记录，减少回表次数</strong>。</li>
</ul>
<hr>
<h5 id="索引区分度">索引区分度</h5>
<p>建立联合索引时的字段顺序，对索引效率也有很大影响。越靠前的字段被用于索引过滤的概率越高，实际开发工作中<strong>建立联合索引时，要把区分度大的字段排在前面，这样区分度大的字段越有可能被更多的 SQL 使用到</strong>。</p>
<p>区分度就是某个字段 column 不同值的个数「除以」表的总行数。</p>
<blockquote>
<p>比如性别的区分度就很小，不适合建立索引或不适合排在联合索引列的靠前的位置，而 UUID 这类字段就比较适合做索引或排在联合索引列的靠前的位置。</p>
<p>MySQL 还有一个查询优化器，查询优化器发现某个值出现在表的数据行中的百分比（惯用的百分比界线是&quot;30%&quot;）很高的时候，它一般会忽略索引，进行全表扫描。</p>
</blockquote>
<hr>
<h5 id="联合索引进行排序">联合索引进行排序</h5>
<p>针对<code>select * from order where status = 1 order by create_time asc</code>SQL语句，怎样通过建立索引提高查询效率？</p>
<p>可以给 status 和 create_time 列建立一个联合索引，因为这样可以避免 MySQL 数据库发生文件排序。因为status 筛选后的数据就是按照 create_time 排好序的，避免在文件排序，提高了查询效率。</p>
<hr>
<hr>
<h3 id="什么时候需要不需要创建索引">什么时候需要/不需要创建索引？</h3>
<p>索引最大的好处是提高查询速度，但是索引也是有缺点的，比如：</p>
<ul>
<li>需要占用物理空间，数量越大，占用空间越大；</li>
<li>创建索引和维护索引要耗费时间，这种时间随着数据量的增加而增大；</li>
<li>会降低表的增删改的效率，因为每次增删改索引，B+ 树为了维护索引有序性，都需要进行动态维护。</li>
</ul>
<blockquote>
<p><strong>什么时候需要创建索引？</strong></p>
<ol>
<li>字段有唯一性限制的，比如商品编码；</li>
<li>经常用于 <code>WHERE</code> 查询条件的字段，这样能够提高整个表的查询速度，如果查询条件不是一个字段，可以建立联合索引。</li>
<li>经常用于 <code>GROUP BY</code> 和 <code>ORDER BY</code> 的字段，这样在查询的时候就不需要再去做一次排序了，因为我们都已经知道了建立索引之后在 B+Tree 中的记录都是排序好的。</li>
</ol>
<hr>
<p><strong>什么时候不需要创建索引？</strong></p>
<ol>
<li><code>WHERE</code> 条件，<code>GROUP BY</code>，<code>ORDER BY</code> 里用不到的字段，索引的价值是快速定位，如果起不到定位的字段通常是不需要创建索引的，因为索引是会占用物理空间的。</li>
<li>字段中存在大量重复数据，不需要创建索引，比如性别字段，只有男女，如果数据库表中，男女的记录分布均匀，那么无论搜索哪个值都可能得到一半的数据。在这些情况下，还不如不要索引，因为 MySQL 还有一个查询优化器，查询优化器发现某个值出现在表的数据行中的百分比很高的时候，它一般会忽略索引，进行全表扫描。</li>
<li>表数据太少的时候，不需要创建索引；</li>
<li>经常更新的字段不用创建索引，比如不要对电商项目的用户余额建立索引，因为索引字段频繁修改，由于要维护 B+Tree的有序性，那么就需要频繁的重建索引，这个过程是会影响数据库性能的。</li>
</ol>
</blockquote>
<hr>
<hr>
<h3 id="有什么索引优化方法">有什么索引优化方法？</h3>
<p>常见的索引优化方法有：<strong>前缀索引优化，覆盖索引优化，主键索引最好是自增，防止索引失效。</strong></p>
<h4 id="前缀索引优化">前缀索引优化</h4>
<p>前缀索引顾名思义就是使用某个字段中字符串的前几个字符建立索引，使用前缀索引是为了减小索引字段大小，**可以增加一个索引页中存储的索引值，有效提高索引的查询速度。**在一些大字符串的字段作为索引时，使用前缀索引可以帮助我们减小索引项的大小。</p>
<p>不过前缀索引有一定的局限性：</p>
<ul>
<li>order by 就无法使用前缀索引；</li>
<li>无法把前缀索引用作覆盖索引；</li>
</ul>
<hr>
<h4 id="覆盖索引优化">覆盖索引优化</h4>
<p>覆盖索引是指 SQL 中 query 的所有字段，在索引 B+Tree 的叶子节点上都能找得到的那些索引，从二级索引中查询得到记录，而不需要通过聚簇索引查询获得，<strong>可以避免回表的操作，减少了大量的I/O操作</strong>。</p>
<hr>
<h4 id="主键索引最好是自增的">主键索引最好是自增的</h4>
<p><strong>如果我们使用自增主键</strong>，每次<strong>插入一条新记录，都是追加操作，不需要重新移动数据</strong>，因此这种插入数据的方法效率非常高。</p>
<p><strong>如果我们使用非自增主键</strong>，由于每次插入主键的索引值都是随机的，因此每次插入新的数据时，就可能会插入到现有数据页中间的某个位置，可能会导致<strong>页分裂</strong>。<strong>页分裂还有可能会造成大量的内存碎片，导致索引结构不紧凑，从而影响查询效率</strong>。</p>
<p>另外，主键字段的长度不要太大，因为<strong>主键字段长度越小，意味着二级索引的叶子节点越小（二级索引的叶子节点存放的数据是主键值），这样二级索引占用的空间也就越小</strong>。</p>
<hr>
<h4 id="索引最好设置为not-null">索引最好设置为NOT NULL</h4>
<p>索引设置为NOT NULL，主要有以下两点原因：</p>
<ul>
<li>第一个原因：索引列存在 NULL 就会导致优化器在做索引选择的时候更加复杂，更加难以优化，因为可为 NULL 的列会使索引、索引统计和值比较都更复杂，比如进行索引统计时，count 会省略值为NULL 的行。</li>
<li>第二个原因：NULL 值是一个没意义的值，但是它会占用物理空间，如果允许存在NULL的字段，那么行格式中<strong>至少会用 1 字节空间存储 NULL 值列表</strong>。</li>
</ul>
<hr>
<h4 id="防止索引失效">防止索引失效</h4>
<p>发生索引失效的情况：</p>
<ul>
<li>当我们使用左或者左右模糊匹配的时候，也就是 <code>like %xx</code> 或者 <code>like %xx%</code>这两种方式都会造成索引失效；</li>
<li>当我们在查询条件中对索引列做了计算、函数、类型转换操作，这些情况下都会造成索引失效；</li>
<li>联合索引要能正确使用需要遵循最左匹配原则，也就是按照最左优先的方式进行索引的匹配，否则就会导致索引失效。</li>
<li>在 WHERE 子句中，如果在 OR 前的条件列是索引列，而在 OR 后的条件列不是索引列，那么索引会失效。</li>
</ul>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2022-02-16</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="http://wen-nan.github.io/posts/mysql%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93/" data-title="MySQL面试题总结" data-hashtags="MySQL,面试总结"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="http://wen-nan.github.io/posts/mysql%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93/" data-hashtag="MySQL"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="http://wen-nan.github.io/posts/mysql%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93/" data-title="MySQL面试题总结" data-ralateuid="dengzhicheng123"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="分享到 百度" data-sharer="baidu" data-url="http://wen-nan.github.io/posts/mysql%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93/" data-title="MySQL面试题总结"><i data-svg-src="/lib/simple-icons/icons/baidu.min.svg"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/mysql/">MySQL</a>,&nbsp;<a href="/tags/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/">面试总结</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/golang%E6%BA%90%E7%A0%81_%E5%8D%8F%E7%A8%8B%E8%B0%83%E5%BA%A6/" class="prev" rel="prev" title="Golang源码之协程调度"><i class="fas fa-angle-left fa-fw"></i>Golang源码之协程调度</a>
            <a href="/posts/%E9%9B%B6%E6%8B%B7%E8%B4%9D/" class="next" rel="next" title="零拷贝">零拷贝<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments">
        <div id="gitalk" class="comment"></div>
        <link rel="stylesheet" href="/js/gitalk.css">
        <script src="/js/gitalk.min.js"></script>
        <script src="/js/md5.js"></script>
        <script>
        const gitalk = new Gitalk({
            clientID: '60afa8aa721493fdc40a',
            clientSecret: '0d83669766bc4d55f49702f8d22e76215dfb373a',
            repo: 'wen-nan.github.io',
            owner: 'wen-nan',
            admin: ['wen-nan'],
            
            
            id: md5(location.pathname), 
            distractionFreeMode: false 
        });
        (function() {
            if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
                document.getElementById('gitalk').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
                return;
            }
            gitalk.render('gitalk');
        })();
        </script>
        </div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">
                <span id="run-time"></span>
            </div><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.109.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Narcissus</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script><script type="text/javascript" src="/js/custom.js"></script></body>
</html>
